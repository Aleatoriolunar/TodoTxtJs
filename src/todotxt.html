<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title data-bind="text: title">My TodoTxt</title>
    <link rel="stylesheet" href="css/simple.css">
</head>
<body onunload="todoTxtView.save()">
<section class="splash" data-bind="css: { hidden: pageReady}">
    <p>Loading</p>
</section>
<section class="hidden" data-bind="css: { hidden: !pageReady }">
    <section class="toolbar">
        <ul id="menu" class="menu">
            <li class="menuItem" id="options">
                <a href="#" onClick="todoTxtView.toggleToolbox(this)">
                    Options
                </a>

                <div data-bind="with: options">
                    <div class="toolBox options">
                        <table>
                            <tr>
                                <td>
                                    <label>Storage</label>&nbsp;
                                </td>
                                <td>
                                    <select data-bind="options: storageOptions,
                                               optionsText: 'name',
                                               value: storageInfo">
                                    </select>
                                </td>
                                <td>
                                    <span class="tip" data-bind="text: storageInfo().tip"></span>
                                </td>
                            </tr>
                            <tr>
                                <td>
                                    <label>Theme</label>&nbsp;
                                </td>
                                <td>
                                    <select data-bind="options: themes,
                                               optionsText: 'name',
                                               value: theme">
                                    </select>
                                </td>
                                <td>
                                    <span class="tip" data-bind="text: theme().info"></span>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
            </li>
            <li class="menuItem" data-bind="visible: options.showImport" id="import">
                <a href="#" onClick="todoTxtView.toggleToolbox(this)">
                    Import
                </a>

                <div data-bind="with: importing">
                    <div class="toolBox import">
                        <textarea data-bind="value: importText"></textarea>
                        <div class="toolBoxFooter">
                            <span class="help">Paste or write your Todos into the text box and click import. <span
                                    class="warning">This will delete existing Todos.</span></span>
                            <button data-bind="click: importTodos">Import</button>
                        </div>
                    </div>
                </div>
            </li>
            <li class="menuItem" data-bind="visible: options.showExport" id="export">
                <a href="#" onClick="todoTxtView.toggleToolbox(this)">
                    Export
                </a>

                <div data-bind="with: exporting">
                    <div class="toolBox">
                        <textarea data-bind="value: exportText"></textarea>
                        <div class="toolBoxFooter">
                            <span class="help">Copy the text and save it into a text file.</span>
                        </div>
                    </div>
                </div>
            </li>
            <li class="menuItem" data-bind="click: save, visible: options.showStorageControls" id="save">
                <a href="#">
                    Save
                </a>
            </li>
            <li class="menuItem" data-bind="click: refresh, visible: options.showStorageControls" id="load">
                <a href="#">
                    Load
                </a>
            </li>
        </ul>
        <span class="lastUpdated" data-bind="text: lastUpdated, visible: options.showStorageControls"></span>
    </section>
    <h1 data-bind="text: title"></h1>
    <!--
        **********************************
        * Add Todo
        **********************************
     -->
    <section class="addTodo">
        <form data-bind="submit: addNewTodo">
            <label>New Todo: </label>
            <input type="text" data-bind="value: newTodoText">
            <span class="tip">Press return to add your new todo.</span>
        </form>
    </section>
    <!--
        **********************************
        * Filters
        **********************************
     -->
    <section class="filters">
        <div><label>Filters</label></div>
        <div class="showCompleted">
            <input type="checkbox" data-bind="checked: showCompleted"/>Show Completed
        </div>
        <div class="quickFilter">
            <label>Quick Filter</label><input type="text" data-bind="value: filters, valueUpdate: 'afterkeydown'"
                                              title="Example: +Project @Context (A)" />

            <div class="clearFilters"><a href="" data-bind="click: clearFilters">x</a></div>
        </div>
    </section>
    <!--
        **********************************
        * Todo
        **********************************
     -->
    <section class="todos" data-bind="template: { name: 'todo-template', foreach: allTodos }">
    </section>
    <footer>
        <div class="version"><label>Version</label> <span data-bind="text: version"></span></div>
        <div class="copyright">Copyright &copy; 2012, Martin Gill. All rights reserved.</div>
        <div class="html5">
            <a href="http://www.w3.org/html/logo/">
                <img src="http://www.w3.org/html/logo/badge/html5-badge-h-css3-semantics-storage.png" width="98" height="32" alt="HTML5 Powered with CSS3 / Styling, Semantics, and Offline &amp; Storage" title="HTML5 Powered with CSS3 / Styling, Semantics, and Offline &amp; Storage">
            </a>
        </div>
    </footer>
</section>
<script type="text/html" id="todo-template">
    <div class="todo" data-bind="todo: $data, css: { completed: completed }, visible: $root.isDisplayed($data)">
        <div class="display" data-bind="attr: { 'class': 'Priority' + priority }"></span>
            <span class="index" data-bind="text: index"></span>
            <input type="checkbox" data-bind="checked: completed" />
                <span data-bind="css: { completed: completed }">
                    <span class="completedFlag" data-bind="visible: completed">x</span>
                    <span class="completedDate" data-bind="text: completedDate(), visible: completed"></span>
                    <span class="priorityBrace" data-bind="visible: priority !== null">(</span>
                    <span class="priority" data-bind="visible: priority != null">
                        <span data-bind="text: priority, attr: { 'class': priority }"></span>
                    </span>
                    <span class="priorityBrace" data-bind="visible: priority !== null">)</span>
                    <span class="createDate" data-bind="visible: createdDate !== null, text: createdDate"></span>
                    <span class="message" data-bind="html: todoHtmlContentsRenderer(contents)"></span>
                </span>
        </div>
        <div class="edit">
            <span class="tip">Press ENTER to accept, ESC to discard.</span>
            <input type="text" />
        </div>
    </div>
</script>
<script src="js/lib/jquery.js" type="text/javascript"></script>
<script src="js/lib/jquery-ui.js" type="text/javascript"></script>
<script src="js/lib/jquery.hotkeys.js" type="text/javascript"></script>
<script src="js/lib/knockoutjs.js" type="text/javascript"></script>
<script src="js/todo.js" type="text/javascript"></script>
<script src="js/todoHtmlRender.js" type="text/javascript"></script>
<script src="js/todomanager.js" type="text/javascript"></script>
<script src="js/todotxt.js" type="text/javascript"></script>
</body>
</html>
