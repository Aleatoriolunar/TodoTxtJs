<!DOCTYPE>
<html>
<head>
    <title data-bind="text: title">My TodoTxt</title>
    <link rel="stylesheet" href="css/simple.css">
</head>
<body onunload="todoTxtView.save()">
    <section class="toolbar">

        <!--
            **********************************
            * Options
            **********************************
         -->
        <div data-bind="with: options">
            <button class="toolButton options" data-bind="css: { selected: showingOptions }, click: showOptionsBox">Options</button>
            <div class="toolBox options" data-bind="visible: showingOptions">
                <input type="checkbox" data-bind="checked: useDropbox"/><label class="options">Use Dropbox.</label>
            </div>
        </div>

        <!--
            **********************************
            * Import / Export
            **********************************
         -->
        <div data-bind="with: importing, visible: !options.useDropbox()">
            <button class="toolButton import" data-bind="css: { selected: importingTodos }, click: showImportBox">Import Todos</button>
            <div class="toolBox import" data-bind="visible: importingTodos">
                <textarea  data-bind="value: importText"></textarea>

                <span class="help">Paste or write your Todos into the text box and click import. <span class="warning">This will delete existing Todos.</span></span>
                <button data-bind="click: importTodos">Import</button>
            </div>
        </div>
        <div data-bind="with: exporting, visible: !options.useDropbox()">
            <button class="toolButton export" data-bind="css: { selected: exportingTodos }, click: showExportBox">Export Todos</button>
            <div class="toolBox" data-bind="visible: exportingTodos">
                <textarea  data-bind="value: exportText"></textarea>
                <span class="help">Copy the text and save it into a text file.</span>
            </div>
        </div>

        <!--
            **********************************
            * Dropbox Controls
            **********************************
         -->
        <div data-bind="visible: options.useDropbox()">
            <span class="lastUpdated" data-bind="text: lastUpdated"></span>
            <button class="toolButton refresh" data-bind="click: refresh">Refresh</button>
        </div>
    </section>
    <h1 data-bind="text: title"></h1>
    <!--
        **********************************
        * Add Todo
        **********************************
     -->
    <section class="addTodo">
            <input type="text" data-bind="value: newTodoText">
            <button data-bind="click: addNewTodo">Add</button>
    </section>
    <!--
        **********************************
        * Filters
        **********************************
     -->
    <section class="filters">
        <div><label>Filters</label></div>
        <div class="showCompleted">
            <input type="checkbox" data-bind="checked: showCompleted">Show Completed</input>
        </div>
        <div class="quickFilter">
            <label>Quick Filter</label><input type="text" data-bind="value: filters, valueUpdate: 'afterkeydown'" title="Example: +Project @Context (A)" />
        </div>
    </section>
    <!--
        **********************************
        * Todo
        **********************************
     -->
    <section class="todos" data-bind="foreach: displayedTodos">
        <div class="todo" data-bind="css: { completed: completed }, visible: $root.isDisplayed($data)">
            <input type="checkbox" data-bind="checked: completed"/>
            <span data-bind="css: { completed: completed }">
                <span class="completedFlag" data-bind="visible: completed">x</span>
                <span class="completedDate" data-bind="text: completedDate(), visible: completed"></span>
                <span class="priorityBrace" data-bind="visible: priority !== null">(</span>
                <span class="priority" data-bind="visible: priority != null">
                    <span data-bind="text: priority, attr: { 'class': priority }"></span>
                </span>
                <span class="priorityBrace" data-bind="visible: priority !== null">)</span>
                <span class="createDate" data-bind="visible: createDate !== null, text: createDate"></span>
                <span class="message" data-bind="html: formatted"></span>
            </span>
        </div>
    </section>
    <footer>
        <div class="version"><label>Version</label> <span data-bind="text: version"></span></div>
        <div class="copyright">Copyright &copy; 2012, Martin Gill. All rights reserved.<div>
    </footer>
</body>
<script src="js/jQuery/js/jquery.js" type="text/javascript"></script>
<script src="js/jQuery/js/jquery-ui.js" type="text/javascript"></script>
<script src="js/knockout/knockoutjs.js" type="text/javascript"></script>
<script src="js/underscore/underscore.js" type="text/javascript"></script>
<script src="js/todo.js" type="text/javascript"></script>
<script src="js/todotxt.js" type="text/javascript"></script>
</html>